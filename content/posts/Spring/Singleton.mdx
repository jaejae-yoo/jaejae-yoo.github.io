---
title: "[Spring] Singleton"
date: 2021-03-30
tags:
  - Spring
---

> ### [Spring] Singleton

스프링이없는 DI 컨테이너는 요청을 할 때마다 새로운 객체를 생성하게 된다. 
➜ 엄청난 트래픽이 있는 상태에서 새로운 객체를 매번 생성하면 큰 메모리 낭비

따라서 객체를 1개만 생성하고 이를 공유하도록 설계해야 한다. 

<br></br>

> #### 싱글톤 패턴

클래스의 인스턴스가 딱 1개만 생성되는 것을 보장하는 디자인 패턴이다.

 

> #### 싱글톤 컨테이너

스프링 컨테이너는 싱글톤 패턴을 적용하지 않아도, 객체 인스턴스를 싱글톤으로 관리한다.

스프링 컨테이너는 싱글톤 컨테이너의 역할을 한다. 

 

> #### 싱글톤 방식의 주의점

싱글톤 객체는 상태를 유지하도록 설계해서는 안된다. 

즉, 무상태(stateless)로 설계해야 한다. 따라서 공유되지 않는 지역변수 등을 사용해야 한다.

 

> #### @Configuration

@Bean이 붙은 메서드마다 스프링 빈이 존재하는지 확인하여 존재하면 이를 반환하고, 아니면 스프링 빈을 등록하는 방식으로 싱글톤이 보장된다.

만약 @Configuration없이 @Bean만 사용하면 스프링빈으로 등록은 되지만 싱글톤이 보장되지는 않는다.